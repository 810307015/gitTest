<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
		}

		#app {
			margin: 100px;
		}

		.yin, .yang {
			display: flex;
			justify-content: space-between;
			width: 100px;
			height: 20px;
			margin: 10px 0;
		}

		.yang {
			background: #333;
		}

		.yin .left,
		.yin .right {
			width: 40px;
			background-color: #333;
		}
	</style>
</head>
<body>
	<button onclick="toggleGua()" id="btn">开始</button>
	<div id="app">
		<div class="yao">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div class="yao">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div class="yao">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div class="yao">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div class="yao">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div class="yao">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div id="desc"></div>
	</div>
	<script type="text/javascript">
		const yaos = document.getElementsByClassName('yao');
		let flag = true;
		function getYao() {
			return Math.random() > 0.5 ? 1 : 0;
		}

		function getGua() {
			const gua = [];
			for(let i = 0; i < 6; i++) {
				gua.push(getYao());
			}
			return gua;
		}

		function getYin() {
			return `
				<div class="yin">
					<div class="left"></div>
					<div class="right"></div>
				</div>
			`
		}

		function getYang() {
			return `
				<div class="yang"></div>
			`
		}

		function init() {
			const gua = getGua();
			gua.forEach((yao, index) => {
				yaos[index].className = yao ? 'yao yang' : 'yao yin';
			});
			desc.innerHTML = `<p>${GUA_MAP[gua.join('')]}</p>`;
		}

		function toggleGua() {
			if(flag) {
				timer = window.setInterval(init, 20);
				flag = false;
				btn.innerText = '停止';
			} else {
				if(timer) {
					clearInterval(timer);
				}
				flag = true;
				btn.innerText = '开始';
			}
		}

		const GUA_MAP = {
			'111111': '乾为天',
			'111110': '天风姤',
			'111100': '天山遁',
			'111000': '天地否',
			'110000': '风地观',
			'100000': '山地剥',
			'101000': '火地晋（乾宫游魂卦）',
			'101111': '火天大有（乾宫归魂卦）',
			'000000': '地为坤',
			'000001': '地雷复',
			'000011': '地泽临',
			'000111': '地天泰',
			'001111': '雷天大壮',
			'011111': '泽天夬',
			'010111': '水天需（坤宫游魂卦）',
			'010000': '水地比（坤宫归魂卦）',
			'011011': '兑为泽',
			'011010': '泽水困',
			'011000': '泽地萃',
			'011100': '泽山咸',
			'010100': '水山蹇',
			'000100': '地山谦',
			'001100': '雷山小过（兑宫游魂卦）',
			'001011': '雷泽归妹（兑宫归魂卦）',
			'101101': '离为火',
			'101100': '火山旅',
			'101110': '火风鼑',
			'101010': '火水未济',
			'100010': '山水蒙',
			'110010': '风水涣',
			'111010': '天水讼（离宫游魂卦）',
			'111101': '天火同人（离宫归魂卦）',
			'001001': '震为雷',
			'001000': '雷地豫',
			'001010': '雷水解',
			'001110': '雷风恒',
			'000110': '地风升',
			'010110': '水风井',
			'011110': '泽风大过（震宫游魂卦）',
			'011001': '泽雷随（震宫归魂卦）',
			'110110': '巽为风',
			'110111': '风天小畜',
			'110101': '风火家人',
			'110001': '风雷益',
			'111001': '天雷无妄',
			'101001': '火雷噬嗑',
			'100001': '山雷颐（巽宫游魂卦）',
			'100110': '山风蛊（巽宫归魂卦）',
			'010010': '坎为水',
			'010011': '水泽节',
			'010001': '水雷屯',
			'010101': '水火既济',
			'011101': '泽火革',
			'001101': '雷火丰',
			'000101': '地火明夷（坎宫游魂卦）',
			'000010': '地水师（坎宫归魂卦）',
			'100100': '艮为山',
			'100101': '山火贲',
			'100111': '山天大畜',
			'100011': '山泽损',
			'101011': '火泽睽',
			'111011': '天泽履',
			'110011': '风泽中孚（艮宫游魂卦）',
			'110100': '风山渐（艮宫归魂卦）'
		}

		init();
	</script>
</body>
</html>